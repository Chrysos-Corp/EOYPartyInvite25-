<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Christmas Party Crossword Code Guess</title>
  <!-- Import Roboto font from Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
  <style>
    body {
      background: #d45b1c;
      color: white;
      font-family: 'Roboto', Arial, sans-serif;
      text-align: center;
      padding: 40px 10px;
    }

    .crossword-img {
      max-width: 100%;
      width: 800px;
      border: 8px solid #fff;
      border-radius: 10px;
      box-shadow: 0 0 20px #b94e10;
      margin: 20px auto;
      display: block;
    }

    .input-area { margin: 30px 0; }

    input[type="text"] {
      padding: 16px;
      font-size: 1.5em;
      border-radius: 8px;
      border: 3px solid #fff;
      background: #fff7e1;
      color: #a84d00;
      width: 300px;
      text-align: center;
      font-family: 'Roboto', Arial, sans-serif;
    }

    button {
      padding: 16px 32px;
      font-size: 1.5em;
      border-radius: 8px;
      border: none;
      background: #a84d00;
      color: #fff;
      margin-left: 12px;
      cursor: pointer;
      font-family: 'Roboto', Arial, sans-serif;
      transition: transform 0.2s, background 0.2s;
    }
    button:hover { background: #8f3f00; transform: scale(1.05); }

    /* Original invite block look */
    .details {
      display: none;
      margin-top: 40px;
      background: #fff7e1;
      color: #a84d00;
      padding: 28px 20px;
      border-radius: 12px;
      box-shadow: 0 0 12px #fff;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      font-size: 1.15em;
      font-family: 'Roboto', Arial, sans-serif;
    }

    .error {
      color: #fff;
      background: #d94f2b;
      padding: 8px 16px;
      border-radius: 8px;
      margin-top: 14px;
      display: inline-block;
      font-size: 1em;
      font-family: 'Roboto', Arial, sans-serif;
    }

    .details ul { text-align: left; margin-top: 12px; margin-bottom: 12px; }
    .invite-title {
      font-family: 'Arial Black', Arial, sans-serif;
      font-size: 2em;
      font-weight: bold;
      letter-spacing: 2px;
      margin-bottom: 0.5em;
      color: #a84d00;
      background: none;
      display: inline-block;
    }

    /* Festive colour-shifting title (no glow) */
    h2 {
      font-size: 3.5em;
      font-weight: 900;
      letter-spacing: 2px;
      color: #fff7e1;
      animation: colorShift 4s infinite ease-in-out;
    }
    @keyframes colorShift {
      0%   { color: #fff7e1; }
      25%  { color: #ffb85c; }
      50%  { color: #ff6b6b; }
      75%  { color: #7ae582; }
      100% { color: #fff7e1; }
    }

    /* ===== Modal upgrade for the invite ===== */
    /* Turn #partyDetails into a centered modal when shown */
    #partyDetails {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(0.92);
      display: none;               /* hidden until correct code */
      z-index: 1001;
      max-width: 680px;
      width: 92vw;
      max-height: 80vh;
      overflow: auto;
      animation: popIn 380ms ease-out forwards;
    }
    @keyframes popIn {
      from { opacity: 0; transform: translate(-50%, -50%) scale(0.92); }
      to   { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }

    /* Backdrop behind modal */
    .backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      display: none;
      z-index: 1000;
    }

    /* Confetti canvas on top (no clicks) */
    #confettiCanvas {
      position: fixed;
      inset: 0;
      display: none;
      pointer-events: none;
      z-index: 1002;
    }

    /* Optional small close button in the modal header area */
    .close-btn {
      position: sticky;
      top: 8px;
      float: right;
      background: transparent;
      color: #a84d00;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Can You Guess Our Secret Party Spot?</h2>

  <img src="crossword.png" alt="Christmas Party Crossword" class="crossword-img" />

  <div class="input-area">
    <input id="codeInput" type="text" placeholder="Enter the secret code..." autocomplete="off" />
    <button onclick="checkCode()">Submit</button>
    <div id="errorMsg" class="error" style="display:none;"></div>
  </div>

  <!-- Invite (will be shown as a centered modal) -->
  <div id="partyDetails" class="details">
    <button class="close-btn" title="Close" onclick="closeInvite()">âœ•</button>
    <div class="invite-title">ðŸŽ‰YOU'RE INVITED!ðŸŽ‰</div>
    <p>
      <strong>Join us for our Christmas Party at Kingpin Bowling Norwood!</strong><br><br>
      Get ready for an afternoon of fun! Bowling, laser tag, and retro arcade games. Lunch is included, with beer, wine, and soft drinks provided. So bring your game face and your best moves.<br><br>
      <strong>Theme:</strong> 80sâ€“90s Throwback<br>
      Dress up in neon leggings, scrunchies, windbreakers, band tees, acid-wash jeans, chunky sneakers, bowling shirts, or vintage sportswear. The bolder, the better!<br><br>
      <strong>Event Info:</strong><br>
      â€¢ <strong>Date:</strong> Friday, 12th December<br>
      â€¢ <strong>Time:</strong> 1:30 PM â€“ 4:30 PM <span style="font-size:0.95em;">(1:15 PM arrival)</span><br>
      â€¢ <strong>Location:</strong> Kingpin Bowling Norwood (11 Osmond Terrace, Norwood SA 5067)<br>
      <br>
      Letâ€™s roll into the holidays with good times and great company!
    </p>
  </div>

  <!-- Backdrop & Confetti canvas (additions) -->
  <div id="backdrop" class="backdrop"></div>
  <canvas id="confettiCanvas"></canvas>

  <script>
    let attempts = 0; // Track number of incorrect guesses

    function checkCode() {
      const input = document.getElementById('codeInput').value.trim().toUpperCase();
      const validCodes = [
        "BOWLING",
        "KINGPIN",
        "KINGPIN BOWLING"
      ];
      const errorMsg = document.getElementById('errorMsg');
      const partyDetails = document.getElementById('partyDetails');
      const backdrop = document.getElementById('backdrop');

      if (validCodes.includes(input)) {
        // Show modal + backdrop
        partyDetails.style.display = 'block';
        backdrop.style.display = 'block';
        document.body.style.overflow = 'hidden'; // prevent page scroll while modal is open
        errorMsg.style.display = 'none';
        attempts = 0;

        // Confetti celebration
        confettiBurst();

      } else {
        attempts++;
        partyDetails.style.display = 'none';
        backdrop.style.display = 'none';
        document.body.style.overflow = '';

        if (attempts === 3) {
          errorMsg.textContent = "Hint: Itâ€™s where balls roll, pins fall and legends are made!";
        } else {
          errorMsg.textContent = "Oops! That's not the secret location. Try again!";
        }
        errorMsg.style.display = 'block';
      }
    }

    // Close invite (button, backdrop click, or ESC)
    function closeInvite() {
      document.getElementById('partyDetails').style.display = 'none';
      document.getElementById('backdrop').style.display = 'none';
      document.body.style.overflow = '';
    }

    document.getElementById('backdrop').addEventListener('click', closeInvite);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeInvite(); });

    document.getElementById('codeInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') checkCode();
    });

    /* ---------- Confetti (vanilla JS canvas) ---------- */
    function confettiBurst(duration = 2200, count = 140) {
      const canvas = document.getElementById('confettiCanvas');
      const ctx = canvas.getContext('2d');

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);

      const colors = ['#FF6B6B', '#FFD93D', '#6BCB77', '#4D96FF', '#F7AEF8', '#FF9A9E'];
      const cx = canvas.width / 2;
      const cy = canvas.height / 2 - 40; // slightly above center
      const particles = Array.from({ length: count }).map(() => {
        const angle = Math.random() * Math.PI * 2;
        const speed = 5 + Math.random() * 6;
        return {
          x: cx,
          y: cy,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          ay: 0.18 + Math.random() * 0.2,  // gravity
          size: 3 + Math.random() * 5,
          rot: Math.random() * Math.PI,
          vr: (Math.random() - 0.5) * 0.3,
          color: colors[(Math.random() * colors.length) | 0],
        };
      });

      let start;
      canvas.style.display = 'block';

      function frame(t) {
        if (!start) start = t;
        const elapsed = t - start;
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particles.forEach(p => {
          p.vy += p.ay;   // gravity
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
          ctx.restore();
        });

        if (elapsed < duration) {
          requestAnimationFrame(frame);
        } else {
          canvas.style.display = 'none';
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }

      requestAnimationFrame(frame);
    }
  </script>
</body>
</html>
